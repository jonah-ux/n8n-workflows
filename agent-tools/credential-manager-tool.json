{
  "name": "ðŸ” Credential Manager Tool",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [240, 300],
      "id": "trigger-1",
      "name": "When Called by AI Agent"
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://jonahautoshopmedia.app.n8n.cloud/api/v1/credentials",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "n8nApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [460, 300],
      "id": "http-1",
      "name": "Get All Credentials",
      "credentials": {
        "n8nApi": {
          "id": "1",
          "name": "n8n API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse and format credentials for the AI agent\nconst credentials = $input.all();\nconst formatted = [];\n\nfor (const cred of credentials) {\n  const item = cred.json;\n  \n  formatted.push({\n    id: item.id,\n    name: item.name,\n    type: item.type,\n    // Extract the actual credential type name (e.g., 'postgres', 'httpBasicAuth')\n    credential_type: item.type?.replace('Api', '').replace('OAuth2', '').toLowerCase(),\n    created_at: item.createdAt,\n    updated_at: item.updatedAt\n  });\n}\n\n// Group by type for easier reference\nconst byType = {};\nformatted.forEach(cred => {\n  const type = cred.credential_type || 'unknown';\n  if (!byType[type]) byType[type] = [];\n  byType[type].push(cred);\n});\n\n// Create summary\nconst summary = {\n  total_credentials: formatted.length,\n  by_type: Object.keys(byType).map(type => ({\n    type,\n    count: byType[type].length,\n    credentials: byType[type]\n  })),\n  all_credentials: formatted\n};\n\nreturn [{ json: summary }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 300],
      "id": "code-1",
      "name": "Format Credentials"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "output",
              "name": "output",
              "type": "string",
              "value": "={{ `Available Credentials (${$json.total_credentials} total):\\n\\n` + $json.by_type.map(t => `**${t.type}** (${t.count}):\\n` + t.credentials.map(c => `  - ${c.name} (ID: ${c.id})`).join('\\n')).join('\\n\\n') }}"
            },
            {
              "id": "credentials",
              "name": "credentials",
              "type": "object",
              "value": "={{ $json.all_credentials }}"
            },
            {
              "id": "summary",
              "name": "summary",
              "type": "object",
              "value": "={{ { total: $json.total_credentials, by_type: $json.by_type.map(t => ({ type: t.type, count: t.count })) } }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [900, 300],
      "id": "set-1",
      "name": "Prepare Output"
    }
  ],
  "connections": {
    "When Called by AI Agent": {
      "main": [[{ "node": "Get All Credentials", "type": "main", "index": 0 }]]
    },
    "Get All Credentials": {
      "main": [[{ "node": "Format Credentials", "type": "main", "index": 0 }]]
    },
    "Format Credentials": {
      "main": [[{ "node": "Prepare Output", "type": "main", "index": 0 }]]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2026-01-12T02:30:00.000Z",
  "versionId": "1"
}
